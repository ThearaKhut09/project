<!DOCTYPE html>
<html lang="km">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>សម្បូរបែប - គណនីរបស់ខ្ញុំ</title>
    <link rel="icon" href="images/logo1.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Siemreap&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="bg-[#fdfaf5] font-siemreap text-[#1d1d1d]">
    <!-- Header -->
    <header class="bg-[#F5F5F5] h-auto md:h-[89px] py-3 md:py-0 sticky top-0 z-50 shadow-sm">
        <nav
            class="max-w-[1360px] mx-auto flex flex-wrap md:flex-nowrap items-center justify-between px-4 md:px-6 lg:px-10 relative">
            <div class="h-[60px] w-[120px] md:h-[90px] md:w-[165px] flex items-center">
                <a href="index.html" class="block h-full w-full">
                    <img src="images/logo.png" alt="SombobaebKH Logo" class="w-full h-full object-contain">
                </a>
            </div>

            <div class="hidden lg:flex gap-4 xl:gap-[26px] items-center text-[14px] xl:text-[16px]">
                <a href="index.html" class="text-[#642f28] hover:text-[#dd070c] transition-colors">ទំព័រដើម</a>
                <a href="general_food.html"
                    class="text-[#642f28] hover:text-[#dd070c] transition-colors">មុខម្ហូបទូទៅ</a>
                <a href="province.html" class="text-[#642f28] hover:text-[#dd070c] transition-colors">ម្ហូបតាមខេត្ត</a>
                <a href="about.html" class="text-[#642f28] hover:text-[#dd070c] transition-colors">អំពីយើង</a>
            </div>

            <div class="flex gap-2 md:gap-[15px] items-center">
                <a href="upload.html" id="uploadBtn"
                    class="hidden md:flex group border border-[#642f28] rounded-[5px] px-3 md:px-6 py-1.5 md:py-2 items-center gap-1 md:gap-2 hover:bg-[#dd070c] hover:text-white transition-colors">
                    <svg class="w-[9px] h-[10px] text-[#642f28] group-hover:text-white transition-colors"
                        viewBox="0 0 9 10" fill="none">
                        <path d="M4.5 0L4.5 7M4.5 0L1.5 3M4.5 0L7.5 3M0 10H9" stroke="currentColor" stroke-width="1" />
                    </svg>
                    <span
                        class="text-[#642f28] text-[13px] md:text-[15px] group-hover:text-white transition-colors">បង្ហោះ</span>
                </a>

                <button id="darkModeBtn" class="relative hidden md:block" aria-label="Dark mode toggle">
                    <svg class="w-[28px] h-[32px] md:w-[34px] md:h-[38px]" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 640 640" fill="#000000">
                        <path
                            d="M320 64C178.6 64 64 178.6 64 320C64 461.4 178.6 576 320 576C388.8 576 451.3 548.8 497.3 504.6C504.6 497.6 506.7 486.7 502.6 477.5C498.5 468.3 488.9 462.6 478.8 463.4C473.9 463.8 469 464 464 464C362.4 464 280 381.6 280 280C280 207.9 321.5 145.4 382.1 115.2C391.2 110.7 396.4 100.9 395.2 90.8C394 80.7 386.6 72.5 376.7 70.3C358.4 66.2 339.4 64 320 64z" />
                    </svg>
                </button>

                <button class="w-[38px] h-[38px] md:w-[47px] md:h-[47px] rounded-full overflow-hidden" data-user-trigger
                    aria-label="User menu">
                    <span
                        class="block w-full h-full rounded-full overflow-hidden bg-[#104127] text-white font-semibold text-lg flex items-center justify-center"
                        data-user-avatar>
                        <img src="images/user-icon.svg" alt="User" class="w-full h-full object-cover"
                            data-user-avatar-img>
                        <span class="hidden" data-user-avatar-initial>U</span>
                    </span>
                </button>

                <button id="hamburger"
                    class="lg:hidden flex flex-col justify-center items-center w-10 h-10 rounded-md hover:bg-[#e5d5c4] transition-colors relative z-[60]"
                    aria-label="Toggle menu">
                    <span class="hamburger-line w-6 h-0.5 bg-[#642f28] transition-all duration-300 ease-in-out"></span>
                    <span
                        class="hamburger-line w-6 h-0.5 bg-[#642f28] transition-all duration-300 ease-in-out mt-1.5"></span>
                    <span
                        class="hamburger-line w-6 h-0.5 bg-[#642f28] transition-all duration-300 ease-in-out mt-1.5"></span>
                </button>
            </div>
        </nav>

        <div id="navMenu"
            class="lg:hidden overflow-hidden transition-all duration-300 ease-in-out max-h-0 opacity-0 absolute top-full left-0 right-0 z-40 w-full">
            <div class="bg-white border-t-2 border-[#642f28] shadow-lg w-full">
                <div class="max-w-[1360px] mx-auto px-4 py-4 flex flex-col gap-1">
                    <a href="index.html"
                        class="text-[#642f28] hover:bg-[#f3e9dd] hover:text-[#dd070c] transition-colors px-4 py-3 rounded-md text-[15px] font-medium">ទំព័រដើម</a>
                    <a href="general_food.html"
                        class="text-[#642f28] hover:bg-[#f3e9dd] hover:text-[#dd070c] transition-colors px-4 py-3 rounded-md text-[15px] font-medium">មុខម្ហូបទូទៅ</a>
                    <a href="province.html"
                        class="text-[#642f28] hover:bg-[#f3e9dd] hover:text-[#dd070c] transition-colors px-4 py-3 rounded-md text-[15px] font-medium">ម្ហូបតាមខេត្ត</a>
                    <a href="about.html"
                        class="text-[#642f28] hover:bg-[#f3e9dd] hover:text-[#dd070c] transition-colors px-4 py-3 rounded-md text-[15px] font-medium">អំពីយើង</a>
                    <div class="md:hidden border-t border-gray-200 mt-2 pt-3">
                        <a href="upload.html"
                            class="flex items-center gap-2 text-[#642f28] hover:bg-[#f3e9dd] px-4 py-3 rounded-md transition-colors">
                            <svg class="w-5 h-5" viewBox="0 0 9 10" fill="none">
                                <path d="M4.5 0L4.5 7M4.5 0L1.5 3M4.5 0L7.5 3M0 10H9" stroke="currentColor"
                                    stroke-width="1" />
                            </svg>
                            <span class="text-[15px] font-medium">បង្ហោះ</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-[1360px] mx-auto px-4 md:px-6 lg:px-10 py-8">
        <!-- Profile Header -->
        <section class=" rounded-[20px] shadow-md p-6 md:p-8 mb-6">
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="relative">
                    <div
                        class="w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden bg-[#f3e9dd] flex items-center justify-center">
                        <img id="profileImage" src="images/user-icon.svg" alt="Profile"
                            class="w-full h-full object-cover">
                        <span id="profileInitial" class="text-5xl text-[#104127] font-semibold hidden">U</span>
                    </div>
                    <button id="changePhotoBtn"
                        class="absolute bottom-0 right-0 bg-[#104127] text-white p-2 rounded-full hover:bg-[#dd070c] transition-colors"
                        aria-label="ផ្លាស់ប្តូររូបភាព">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </button>
                    <input type="file" id="photoInput" accept="image/*" class="hidden" aria-label="ជ្រើសរើសរូបភាព">
                </div>

                <div class="flex-1 text-center md:text-left">
                    <h1 id="profileName" class="text-3xl font-bold text-[#104127] mb-2">អ្នកប្រើប្រាស់</h1>
                    <p id="profileEmail" class="text-gray-600 mb-4">email@example.com</p>
                    <button id="editProfileBtn"
                        class="bg-[#104127] text-white px-6 py-2 rounded-full hover:bg-[#dd070c] transition-colors">
                        កែសម្រួលប្រវត្តិរូប
                    </button>
                </div>
            </div>
        </section>

        <!-- Tabs -->
        <div class="mb-6">
            <div class="flex gap-2 border-b border-gray-300">
                <button id="postsTab"
                    class="tab-btn px-6 py-3 font-semibold border-b-2 border-[#dd070c] text-[#dd070c]">
                    បង្ហោះរបស់ខ្ញុំ
                </button>
                <button id="favoritesTab" class="tab-btn px-6 py-3 font-semibold text-gray-600 hover:text-[#dd070c]">
                    ចូលចិត្ត
                </button>
            </div>
        </div>

        <!-- Posts Section -->
        <section id="postsSection" class="tab-content">
            <div id="userPostsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Posts will be loaded here -->
            </div>
            <div id="noPostsMessage" class="hidden text-center py-12">
                <svg class="w-20 h-20 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <p class="text-xl text-gray-600">អ្នកមិនទាន់មានប្រកាសណាមួយទេ</p>
                <a href="upload.html"
                    class="inline-block mt-4 bg-[#104127] text-white px-6 py-2 rounded-full hover:bg-[#dd070c] transition-colors">
                    បង្ហោះ
                </a>
            </div>
        </section>

        <!-- Favorites Section -->
        <section id="favoritesSection" class="tab-content hidden">
            <div id="userFavoritesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Favorites will be loaded here -->
            </div>
            <div id="noFavoritesMessage" class="hidden text-center py-12">
                <svg class="w-20 h-20 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                </svg>
                <p class="text-xl text-gray-600">អ្នកមិនទាន់មានម្ហូបចូលចិត្តទេ</p>
            </div>
        </section>
    </main>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-[20px] p-6 md:p-8 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-[#104127]">កែសម្រួលប្រវត្តិរូប</h2>
                <button id="closeEditModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>

            <form id="editProfileForm" class="space-y-4">
                <div>
                    <label for="editFullName" class="block text-gray-700 mb-2">ឈ្មោះពេញ</label>
                    <input type="text" id="editFullName" placeholder="បញ្ចូលឈ្មោះពេញ"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-[#104127]">
                </div>

                <div>
                    <label for="editUsername" class="block text-gray-700 mb-2">ឈ្មោះអ្នកប្រើ</label>
                    <input type="text" id="editUsername" placeholder="បញ្ចូលឈ្មោះអ្នកប្រើ"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-[#104127]">
                </div>

                <div>
                    <label for="editEmail" class="block text-gray-700 mb-2">អ៊ីមែល</label>
                    <input type="email" id="editEmail" disabled placeholder="អ៊ីមែល"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100">
                </div>

                <div id="profileFormMessage" class="hidden"></div>

                <div class="flex gap-4 justify-end">
                    <button type="button" id="cancelEditBtn"
                        class="px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors">
                        បោះបង់
                    </button>
                    <button type="submit"
                        class="px-6 py-2 bg-[#104127] text-white rounded-full hover:bg-[#dd070c] transition-colors">
                        រក្សាទុក
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Post Modal -->
    <div id="editPostModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-[20px] p-6 md:p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-[#104127]">កែសម្រួលប្រកាស</h2>
                <button id="closeEditPostModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>

            <form id="editPostForm" class="space-y-4">
                <input type="hidden" id="editPostId">

                <div>
                    <label for="editPostTitle" class="block text-gray-700 mb-2">ចំណងជើង</label>
                    <input type="text" id="editPostTitle" required placeholder="បញ្ចូលចំណងជើង"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-[#104127]">
                </div>

                <div>
                    <label for="editPostDescription" class="block text-gray-700 mb-2">ការពិពណ៌នា</label>
                    <textarea id="editPostDescription" rows="4" placeholder="បញ្ចូលការពិពណ៌នា"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-[#104127]"></textarea>
                </div>

                <div id="postFormMessage" class="hidden"></div>

                <div class="flex gap-4 justify-end">
                    <button type="button" id="cancelEditPostBtn"
                        class="px-6 py-2 bg-gray-300 text-gray-700 rounded-full hover:bg-gray-400 transition-colors">
                        បោះបង់
                    </button>
                    <button type="submit"
                        class="px-6 py-2 bg-[#104127] text-white rounded-full hover:bg-[#dd070c] transition-colors">
                        រក្សាទុក
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-[#104127] text-white py-8 mt-12">
        <div class="max-w-[1360px] mx-auto px-4 md:px-6 lg:px-10 text-center">
            <p>&copy; 2024 សម្បូរបែប។ រក្សាសិទ្ធិគ្រប់យ៉ាង។</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/darkmode.js"></script>
    <script src="js/profile.js"></script>
</body>

</html>